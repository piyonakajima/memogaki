# Requirements Document

## Introduction

「瞬発思考」アプリのコア機能となる20秒カウントダウンタイマー。ユーザーが思考を書き出す時間を管理し、時間切れ時に次のフェーズ（読み返しモード）へ遷移するトリガーを提供する。視認性の高い残り時間表示と、直感的な操作性を重視する。

## Requirements

### Requirement 1: カウントダウン表示

**Objective:** ユーザーとして、残り時間を大きく見やすい形式で確認したい。これにより、時間を意識しながら思考に集中できる。

#### Acceptance Criteria

1. WHEN タイマーが表示される THEN タイマーコンポーネント SHALL 残り秒数を大きなフォントサイズ（48px以上）で表示する
2. WHEN タイマーがカウントダウン中 THEN タイマーコンポーネント SHALL 1秒ごとに表示を更新する
3. WHEN 残り時間が5秒以下になる THEN タイマーコンポーネント SHALL 視覚的な警告（色の変化など）を表示する
4. WHILE タイマーが動作中 THE タイマーコンポーネント SHALL 残り時間を「SS」形式（秒のみ）で表示する

### Requirement 2: タイマー開始機能

**Objective:** ユーザーとして、タイマーを開始して20秒のカウントダウンを始めたい。これにより、書き出しの時間制限を設けられる。

#### Acceptance Criteria

1. WHEN ユーザーが開始ボタンをクリックする THEN タイマーコンポーネント SHALL 20秒からカウントダウンを開始する
2. WHEN タイマーが開始される THEN タイマーコンポーネント SHALL 開始ボタンを非表示または無効化する
3. WHEN タイマーが開始される THEN タイマーコンポーネント SHALL 停止ボタンを表示または有効化する
4. IF タイマーが既に動作中 THEN 開始操作 SHALL 無視される

### Requirement 3: タイマー停止機能

**Objective:** ユーザーとして、必要に応じてタイマーを一時停止したい。これにより、中断が必要な場合に対応できる。

#### Acceptance Criteria

1. WHEN ユーザーが停止ボタンをクリックする THEN タイマーコンポーネント SHALL カウントダウンを一時停止する
2. WHEN タイマーが停止される THEN タイマーコンポーネント SHALL 現在の残り時間を保持する
3. WHEN タイマーが停止中 AND ユーザーが再開ボタンをクリックする THEN タイマーコンポーネント SHALL 保持していた時間からカウントダウンを再開する
4. WHEN タイマーが停止される THEN タイマーコンポーネント SHALL 停止ボタンを再開ボタンに変更する

### Requirement 4: タイマーリセット機能

**Objective:** ユーザーとして、タイマーを初期状態（20秒）にリセットしたい。これにより、やり直しができる。

#### Acceptance Criteria

1. WHEN ユーザーがリセットボタンをクリックする THEN タイマーコンポーネント SHALL タイマーを20秒にリセットする
2. WHEN タイマーがリセットされる THEN タイマーコンポーネント SHALL カウントダウンを停止する
3. WHEN タイマーがリセットされる THEN タイマーコンポーネント SHALL 開始ボタンを表示または有効化する
4. IF タイマーが初期状態（20秒、未開始） THEN リセットボタン SHALL 無効化される

### Requirement 5: タイマー終了時のコールバック

**Objective:** システムとして、タイマー終了時に親コンポーネントへ通知したい。これにより、次のフェーズ（読み返しモード）への遷移をトリガーできる。

#### Acceptance Criteria

1. WHEN タイマーが0秒に達する THEN タイマーコンポーネント SHALL onComplete コールバックを呼び出す
2. WHEN タイマーが0秒に達する THEN タイマーコンポーネント SHALL カウントダウンを自動的に停止する
3. WHEN タイマーが終了する THEN タイマーコンポーネント SHALL 終了状態を視覚的に示す（0秒表示を維持）
4. IF onCompleteコールバックが設定されていない THEN タイマーコンポーネント SHALL エラーなく終了処理を完了する

### Requirement 6: タイマー設定のカスタマイズ

**Objective:** 開発者として、タイマーの初期値を設定可能にしたい。これにより、将来的な拡張（異なる時間設定）に対応できる。

#### Acceptance Criteria

1. WHEN タイマーコンポーネントが初期化される THEN コンポーネント SHALL initialSeconds プロパティで初期値を受け取れる
2. IF initialSeconds が指定されない THEN タイマーコンポーネント SHALL デフォルト値として20秒を使用する
3. WHEN initialSeconds が指定される THEN タイマーコンポーネント SHALL 指定された秒数からカウントダウンを開始する
