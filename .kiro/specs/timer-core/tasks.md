# Implementation Plan

## timer-core: タイマーコア機能

- [x] 1. 型定義とカスタムフックの基盤構築
- [x] 1.1 タイマー関連の型定義を作成する
  - タイマーの状態を表す型（idle/running/paused/completed）を定義する
  - フックのオプションと戻り値の型を定義する
  - 将来の拡張に備えた柔軟な型設計にする
  - _Requirements: 6.1, 6.2, 6.3_

- [x] 1.2 タイマーロジックを管理するカスタムフックを実装する
  - 残り秒数の状態管理を実装する
  - タイマー状態（idle/running/paused/completed）の管理を実装する
  - setIntervalのIDをRefで保持し、適切にクリーンアップする
  - 初期秒数のカスタマイズ（デフォルト20秒）に対応する
  - _Requirements: 6.1, 6.2, 6.3_

- [x] 2. タイマー操作機能の実装
- [x] 2.1 タイマー開始機能を実装する
  - 開始操作でカウントダウンを開始する
  - 1秒ごとに残り秒数を減らす
  - 既に動作中の場合は開始操作を無視する
  - _Requirements: 2.1, 2.4, 1.2_

- [x] 2.2 タイマー停止・再開機能を実装する
  - 停止操作でカウントダウンを一時停止する
  - 停止時に現在の残り時間を保持する
  - 再開操作で保持していた時間からカウントダウンを再開する
  - _Requirements: 3.1, 3.2, 3.3_

- [x] 2.3 タイマーリセット機能を実装する
  - リセット操作でタイマーを初期秒数に戻す
  - リセット時にカウントダウンを停止する
  - 初期状態（未開始）ではリセット操作を無効とする
  - _Requirements: 4.1, 4.2, 4.3, 4.4_

- [x] 3. タイマー終了処理の実装
- [x] 3.1 タイマー終了時のコールバック機能を実装する
  - 0秒に達したらカウントダウンを自動停止する
  - 0秒到達時にonCompleteコールバックを呼び出す
  - コールバックが未設定でもエラーなく動作する
  - 終了状態を維持し、0秒表示を継続する
  - _Requirements: 5.1, 5.2, 5.3, 5.4_

- [x] 4. タイマーUIコンポーネントの実装
- [x] 4.1 残り時間の表示機能を実装する
  - 残り秒数を大きなフォント（48px以上）で表示する
  - 秒数のみのシンプルな形式（SS）で表示する
  - 1秒ごとに表示を更新する
  - _Requirements: 1.1, 1.2, 1.4_

- [x] 4.2 警告表示機能を実装する
  - 残り時間が5秒以下になったら警告状態を検出する
  - 警告状態で視覚的な変化（色の変更など）を表示する
  - _Requirements: 1.3_

- [x] 4.3 操作ボタンの実装
  - 開始ボタンを実装する（idle状態で表示）
  - 停止/再開ボタンを実装する（running/paused状態で切り替え）
  - リセットボタンを実装する（初期状態以外で有効）
  - 状態に応じてボタンの表示/非表示/有効/無効を切り替える
  - _Requirements: 2.2, 2.3, 3.4, 4.3_

- [x] 5. アプリケーション統合
- [x] 5.1 タイマーコンポーネントをアプリに組み込む
  - Timerコンポーネントをエクスポートする
  - App.tsxにTimerコンポーネントを配置して動作確認する
  - onCompleteコールバックの動作をコンソールログで確認する
  - _Requirements: 5.1, 5.4_

- [x] 6. 動作検証
- [x] 6.1 タイマー動作の総合検証
  - 開始→カウントダウン→終了の一連の流れを確認する
  - 停止→再開の動作を確認する
  - リセット操作の動作を確認する
  - 5秒以下での警告表示を確認する
  - _Requirements: 1.1-1.4, 2.1-2.4, 3.1-3.4, 4.1-4.4, 5.1-5.4_
