# Requirements Document

## Introduction

「瞬発思考」アプリの書き出しモード機能。ユーザーが20秒間のタイマー制限内で思考をテキストとして書き出すための入力インターフェースを提供する。スマートフォンでの使用を主眼に置いたレスポンシブデザインと、タイマーとの連携による没入感のある書き出し体験を実現する。プレースホルダーによるヒント表示で、ユーザーが何を書くべきか迷わないようサポートする。

## Requirements

### Requirement 1: テキスト入力エリア

**Objective:** ユーザーとして、思考を自由に書き出せる広い入力エリアがほしい。これにより、制限時間内に集中して思考を言語化できる。

#### Acceptance Criteria

1. WHEN 書き出しモードが表示される THEN 書き出しコンポーネント SHALL textarea要素を画面の主要領域に表示する
2. WHEN ユーザーがテキストを入力する THEN 書き出しコンポーネント SHALL 入力内容をリアルタイムで反映する
3. WHILE 書き出しモードがアクティブ THE 書き出しコンポーネント SHALL textareaにフォーカスを自動的に設定する
4. WHEN テキストが入力される THEN 書き出しコンポーネント SHALL 入力内容を親コンポーネントに通知する（onChangeコールバック）
5. IF テキストが複数行に渡る THEN 書き出しコンポーネント SHALL textareaの高さを自動調整するか、スクロール可能にする

### Requirement 2: スマホ対応レスポンシブデザイン

**Objective:** ユーザーとして、スマートフォンで快適にテキストを入力したい。これにより、場所を選ばず瞬発思考を実践できる。

#### Acceptance Criteria

1. WHEN 画面幅が768px未満 THEN 書き出しコンポーネント SHALL モバイルレイアウトを適用する
2. WHEN モバイルレイアウトが適用される THEN 書き出しコンポーネント SHALL textareaを画面幅いっぱいに表示する（適切なパディングを除く）
3. WHEN モバイルデバイスでソフトキーボードが表示される THEN 書き出しコンポーネント SHALL 入力エリアがキーボードに隠れないよう配置を調整する
4. WHILE モバイルデバイスで使用中 THE 書き出しコンポーネント SHALL タップ操作に適したサイズ（最小44px）のUI要素を維持する
5. WHEN デスクトップ画面幅（768px以上） THEN 書き出しコンポーネント SHALL 最大幅を設定し、中央揃えで表示する

### Requirement 3: 入力中のタイマー連携

**Objective:** ユーザーとして、タイマーと連動した書き出し体験をしたい。これにより、時間を意識しながら集中して書き出せる。

#### Acceptance Criteria

1. WHEN 書き出しモードが開始される THEN 書き出しコンポーネント SHALL タイマーを自動的に開始する（autoStart対応）
2. WHEN タイマーが0秒に達する THEN 書き出しコンポーネント SHALL textareaを読み取り専用または無効化する
3. WHEN タイマーが終了する THEN 書き出しコンポーネント SHALL 現在の入力内容を確定し、onComplete コールバックを呼び出す
4. WHILE タイマーがカウントダウン中 THE 書き出しコンポーネント SHALL ユーザーの入力を許可し続ける
5. IF タイマーが停止中 THEN 書き出しコンポーネント SHALL ユーザーの入力を引き続き許可する

### Requirement 4: プレースホルダーでのヒント表示

**Objective:** ユーザーとして、何を書くべきかのヒントがほしい。これにより、書き出しの最初の一歩を踏み出しやすくなる。

#### Acceptance Criteria

1. WHEN textareaが空の状態で表示される THEN 書き出しコンポーネント SHALL プレースホルダーテキストを表示する
2. WHEN プレースホルダーが表示される THEN 書き出しコンポーネント SHALL 書き出しを促すヒントメッセージを表示する（例：「頭に浮かんだことを書いてみましょう...」）
3. WHEN ユーザーが入力を開始する THEN 書き出しコンポーネント SHALL プレースホルダーを非表示にする
4. IF カスタムプレースホルダーが指定される THEN 書き出しコンポーネント SHALL 指定されたテキストをプレースホルダーとして使用する
5. WHEN プレースホルダーが表示される THEN 書き出しコンポーネント SHALL 本文より薄い色でプレースホルダーを表示する

### Requirement 5: 書き出しモードの状態管理

**Objective:** システムとして、書き出しモードの状態を適切に管理したい。これにより、セッションフロー全体との連携がスムーズになる。

#### Acceptance Criteria

1. WHEN 書き出しコンポーネントが初期化される THEN コンポーネント SHALL 空のテキスト状態で開始する
2. WHEN 書き出しが完了する（タイマー終了） THEN 書き出しコンポーネント SHALL 入力されたテキストを返す
3. IF initialText プロパティが指定される THEN 書き出しコンポーネント SHALL 指定されたテキストを初期値として設定する
4. WHEN 書き出しモードがリセットされる THEN 書き出しコンポーネント SHALL テキストをクリアし、初期状態に戻る
5. WHILE 書き出しモードがアクティブ THE 書き出しコンポーネント SHALL 現在の入力テキストを保持する

### Requirement 6: アクセシビリティ対応

**Objective:** すべてのユーザーとして、アクセシブルな書き出し体験をしたい。これにより、多様なユーザーが瞬発思考を実践できる。

#### Acceptance Criteria

1. WHEN 書き出しモードが表示される THEN 書き出しコンポーネント SHALL textareaに適切なaria-label属性を設定する
2. WHEN タイマーが残り5秒以下になる THEN 書き出しコンポーネント SHALL スクリーンリーダー向けに残り時間を通知する（aria-live）
3. WHILE ユーザーが入力中 THE 書き出しコンポーネント SHALL キーボードナビゲーションを完全にサポートする
4. IF ユーザーがハイコントラストモードを使用 THEN 書き出しコンポーネント SHALL 十分なコントラスト比を維持する
