# Requirements Document

## Introduction

「瞬発思考」アプリの結果出力機能。セッション完了後に表示され、ユーザーが書き出した全メモを一覧表示し、クリップボードへのコピー機能を提供する。コピーしたメモをAIエージェント（Claude、ChatGPTなど）に貼り付けて深掘りすることを促すガイダンスを表示し、コピー操作の完了をフィードバックする。セッション管理（spec 5）からの遷移先として機能し、ユーザーの瞬発的なアイデアをAIとの対話に繋げる重要な出口機能。

## Requirements

### Requirement 1: 全メモの一覧表示

**Objective:** ユーザーとして、セッション中に書き出した全てのメモを一覧で確認したい。これにより、自分の瞬発的な思考を振り返り、全体像を把握できる。

#### Acceptance Criteria

1. WHEN セッションが完了して結果画面に遷移する THEN 結果出力コンポーネント SHALL 全ラウンドのメモを一覧表示する
2. WHEN メモ一覧が表示される THEN 結果出力コンポーネント SHALL 各メモにラウンド番号（1, 2, 3...）を付与して表示する
3. WHEN メモ一覧が表示される THEN 結果出力コンポーネント SHALL 書き出し時間順（ラウンド順）でメモを並べる
4. IF メモが空のラウンドがある THEN 結果出力コンポーネント SHALL そのラウンドも表示し、空であることを示す（例：「（未入力）」）
5. WHILE 結果画面が表示されている THE 結果出力コンポーネント SHALL メモの内容を読みやすいフォーマットで表示する
6. WHEN メモ一覧が表示される THEN 結果出力コンポーネント SHALL セッションの総ラウンド数と実際に入力されたメモ数を表示する

### Requirement 2: クリップボードコピー機能

**Objective:** ユーザーとして、全メモをワンクリックでクリップボードにコピーしたい。これにより、AIエージェントへの貼り付けが簡単にできる。

#### Acceptance Criteria

1. WHEN 結果画面が表示される THEN 結果出力コンポーネント SHALL 「すべてコピー」ボタンを目立つ位置に表示する
2. WHEN ユーザーが「すべてコピー」ボタンをクリックする THEN 結果出力コンポーネント SHALL 全メモをフォーマット済みテキストとしてクリップボードにコピーする
3. WHEN クリップボードにコピーする THEN 結果出力コンポーネント SHALL 各メモをラウンド番号付きで整形する（例：「1. [メモ内容]」）
4. WHEN クリップボードにコピーする THEN 結果出力コンポーネント SHALL メモ間に適切な改行を挿入して可読性を確保する
5. IF Clipboard APIがサポートされていない THEN 結果出力コンポーネント SHALL フォールバック方法（テキスト選択）を提供する
6. WHEN コピーが実行される THEN 結果出力コンポーネント SHALL 非同期でクリップボード操作を行い、UIをブロックしない

### Requirement 3: コピー完了フィードバック

**Objective:** ユーザーとして、コピーが成功したことを明確に知りたい。これにより、安心して次のステップ（AIへの貼り付け）に進める。

#### Acceptance Criteria

1. WHEN クリップボードへのコピーが成功する THEN 結果出力コンポーネント SHALL 視覚的なフィードバックを表示する（ボタンの変化、チェックマークなど）
2. WHEN コピー成功フィードバックが表示される THEN 結果出力コンポーネント SHALL 2-3秒後に元の状態に戻す
3. IF クリップボードへのコピーが失敗する THEN 結果出力コンポーネント SHALL エラーメッセージを表示する
4. WHEN コピー操作が行われる THEN 結果出力コンポーネント SHALL ボタンのテキストを「コピーしました！」に一時的に変更する
5. WHILE フィードバックが表示されている THE 結果出力コンポーネント SHALL 再度のコピー操作を受け付ける（連続クリック対応）

### Requirement 4: AIエージェントへの貼り付け案内

**Objective:** ユーザーとして、コピーしたメモの活用方法を知りたい。これにより、瞬発思考の成果をAIとの対話で深掘りできる。

#### Acceptance Criteria

1. WHEN 結果画面が表示される THEN 結果出力コンポーネント SHALL AIエージェントへの貼り付けを促すガイダンステキストを表示する
2. WHEN ガイダンスが表示される THEN 結果出力コンポーネント SHALL 具体的なAIサービス名を例示する（Claude、ChatGPTなど）
3. WHEN ガイダンスが表示される THEN 結果出力コンポーネント SHALL 推奨するプロンプト例を表示する（例：「以下のメモを整理して深掘りしてください」）
4. WHEN コピーが完了した後 THEN 結果出力コンポーネント SHALL ガイダンスをより強調表示する（次のステップを明確化）
5. WHILE 結果画面が表示されている THE 結果出力コンポーネント SHALL ガイダンスを常に視認可能な位置に配置する

### Requirement 5: セッション再開・新規開始

**Objective:** ユーザーとして、結果確認後に新しいセッションを開始したい。これにより、連続して瞬発思考を実践できる。

#### Acceptance Criteria

1. WHEN 結果画面が表示される THEN 結果出力コンポーネント SHALL 「新しいセッションを始める」ボタンを表示する
2. WHEN ユーザーが「新しいセッションを始める」をクリックする THEN 結果出力コンポーネント SHALL セッション設定画面に遷移する
3. WHEN 新しいセッションが開始される THEN 結果出力コンポーネント SHALL 前回の結果データをクリアする
4. IF ユーザーがコピーせずに新しいセッションを開始しようとする THEN 結果出力コンポーネント SHALL 確認ダイアログを表示しない（シンプルな遷移を優先）
5. WHEN 結果画面から遷移する THEN 結果出力コンポーネント SHALL onStartNewSession コールバックを呼び出す

### Requirement 6: レスポンシブ対応

**Objective:** ユーザーとして、スマートフォンでも結果を快適に確認・コピーしたい。これにより、どのデバイスでも瞬発思考の成果を活用できる。

#### Acceptance Criteria

1. WHEN 画面幅が狭い（モバイル） THEN 結果出力コンポーネント SHALL メモ一覧を縦スクロール可能なレイアウトで表示する
2. WHEN モバイルで表示される THEN 結果出力コンポーネント SHALL コピーボタンを指でタップしやすいサイズで表示する（最小44x44px）
3. WHILE 結果画面がモバイルで表示されている THE 結果出力コンポーネント SHALL ガイダンステキストを簡潔に表示する
4. WHEN 画面幅が広い（デスクトップ） THEN 結果出力コンポーネント SHALL メモ一覧とアクションボタンを見やすく配置する
5. IF 長いメモがある THEN 結果出力コンポーネント SHALL テキストを折り返して全文を表示する

### Requirement 7: アクセシビリティ対応

**Objective:** すべてのユーザーとして、アクセシブルに結果を確認・操作したい。これにより、多様なユーザーが瞬発思考の成果を活用できる。

#### Acceptance Criteria

1. WHEN 結果画面が表示される THEN 結果出力コンポーネント SHALL スクリーンリーダー向けに「セッション完了」を通知する（aria-live）
2. WHEN コピーが完了する THEN 結果出力コンポーネント SHALL スクリーンリーダー向けに「コピーしました」を通知する
3. WHILE 結果画面が表示されている THE 結果出力コンポーネント SHALL キーボードナビゲーションを完全にサポートする
4. WHEN メモ一覧が表示される THEN 結果出力コンポーネント SHALL 各メモに適切なセマンティックマークアップを適用する（リスト構造）
5. WHEN ボタンが表示される THEN 結果出力コンポーネント SHALL 適切なaria-labelを設定する
