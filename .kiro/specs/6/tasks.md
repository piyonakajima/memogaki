# Implementation Plan

## 結果出力機能（output-result）

- [x] 1. 型定義とクリップボードフックの実装
- [x] 1.1 結果出力機能の型定義を作成
  - メモデータの型を定義（ラウンド番号、テキスト内容）
  - 結果画面のPropsに必要な型を定義（メモ配列、コールバック）
  - クリップボードフックの戻り値型を定義（copied状態、error状態、コピー関数）
  - _Requirements: 1.1, 1.2, 2.2_

- [x] 1.2 クリップボード操作のカスタムフックを実装
  - Clipboard APIを使用したテキストコピー機能を実装
  - API非対応時のexecCommandフォールバックを実装
  - コピー成功/失敗の状態管理を実装
  - 成功状態の自動リセット機能を実装（3秒後）
  - エラーメッセージの管理機能を実装
  - _Requirements: 2.5, 2.6, 3.2_

- [x] 1.3 クリップボードフックのテストを作成
  - コピー成功時の状態変化をテスト
  - コピー失敗時のエラー状態をテスト
  - タイムアウト後の状態リセットをテスト
  - フォールバック動作をテスト
  - _Requirements: 2.5, 2.6_

- [x] 2. メモ一覧表示機能の実装
- [x] 2.1 メモ一覧コンポーネントを実装
  - 全ラウンドのメモを順序付きリストで表示
  - 各メモにラウンド番号を付与して表示
  - 空のメモは「（未入力）」と表示
  - セマンティックなHTML構造を使用（ol要素）
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 2.2 メモのフォーマット関数を実装
  - メモ配列をクリップボード用テキストに変換
  - ラウンド番号付きフォーマットで整形
  - メモ間に適切な改行を挿入
  - 空メモの表示形式を統一
  - _Requirements: 2.3, 2.4_

- [x] 2.3 メモ一覧のスタイルを実装
  - 読みやすいフォーマットでメモを表示
  - 長いテキストの折り返し表示
  - セッション統計情報の表示（総ラウンド数、入力メモ数）
  - _Requirements: 1.5, 1.6, 6.5_

- [x] 3. コピーボタンとフィードバック機能の実装
- [x] 3.1 コピーボタンコンポーネントを実装
  - 「すべてコピー」ボタンを目立つ位置に配置
  - クリック時にフォーマット済みテキストをコピー
  - 非同期でクリップボード操作を実行
  - コピー完了時のコールバック呼び出し
  - _Requirements: 2.1, 2.2, 2.6, 3.5_

- [x] 3.2 コピーフィードバック表示を実装
  - 成功時にボタンテキストを「コピーしました！」に変更
  - 視覚的なフィードバック表示（ボタンスタイル変化）
  - 3秒後に元の状態に自動復帰
  - エラー時のメッセージ表示
  - _Requirements: 3.1, 3.2, 3.3, 3.4_

- [x] 3.3 コピーボタンのテストを作成
  - ボタンクリックでコピーが実行されることをテスト
  - フィードバック表示の切り替えをテスト
  - エラー時の表示をテスト
  - 連続クリック対応をテスト
  - _Requirements: 3.1, 3.5_

- [x] 4. AIガイダンスと新規セッション機能の実装
- [x] 4.1 AIガイダンスコンポーネントを実装
  - AIエージェントへの貼り付けを促すテキストを表示
  - 具体的なAIサービス名を例示（Claude、ChatGPT）
  - 推奨プロンプト例を表示
  - コピー完了後にガイダンスを強調表示
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5_

- [x] 4.2 新規セッションボタンを実装
  - 「新しいセッションを始める」ボタンを表示
  - クリック時にコールバックを呼び出し
  - シンプルな遷移（確認ダイアログなし）
  - _Requirements: 5.1, 5.2, 5.4, 5.5_

- [x] 5. メインコンポーネントとレスポンシブ対応
- [x] 5.1 結果画面のメインコンポーネントを実装
  - 全サブコンポーネントを統合
  - コピー状態の親コンポーネントでの管理
  - メモデータの受け渡しとフォーマット
  - 結果データのクリア処理
  - _Requirements: 1.1, 5.3_

- [x] 5.2 レスポンシブスタイルを実装
  - モバイル向け縦スクロールレイアウト
  - タッチ操作しやすいボタンサイズ（最小44x44px）
  - デスクトップ向け見やすいレイアウト
  - モバイルでの簡潔なガイダンス表示
  - _Requirements: 6.1, 6.2, 6.3, 6.4_

- [x] 5.3 メインコンポーネントのテストを作成
  - メモ一覧の正常表示をテスト
  - コピーからガイダンス強調までのフローをテスト
  - 新規セッション開始のコールバック呼び出しをテスト
  - _Requirements: 1.1, 4.4, 5.5_

- [x] 6. アクセシビリティ対応
- [x] 6.1 スクリーンリーダー対応を実装
  - 画面表示時に「セッション完了」を通知（aria-live）
  - コピー完了時に「コピーしました」を通知
  - エラー時のアラート通知
  - _Requirements: 7.1, 7.2_

- [x] 6.2 キーボード・セマンティクス対応を実装
  - キーボードナビゲーションの完全サポート
  - ボタンに適切なaria-labelを設定
  - メモ一覧にセマンティックなマークアップを適用
  - フォーカス管理の実装
  - _Requirements: 7.3, 7.4, 7.5_

- [x] 7. エクスポートと統合
- [x] 7.1 コンポーネントのエクスポート設定
  - index.tsでの名前付きエクスポート
  - 型定義のエクスポート
  - _Requirements: 全体_

- [x] 7.2 統合テストを作成
  - セッション完了から結果表示までのフローをテスト
  - コピー→ガイダンス強調→新規セッションの一連の流れをテスト
  - モバイル・デスクトップ両方のレイアウトをテスト
  - _Requirements: 全体_
